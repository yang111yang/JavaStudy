<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>购物车</title>
		<script src="js/jQuery-1.8.3.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function(){
				//全选
				$("#chks").click(function(){
					var flag = $("#chks").prop("checked");
					//alert(flag);
					$("input[name=chk]").each(function(){
						$(this).prop("checked",flag);
					});
				});
				//优化全选
				$("input[name=chk]").click(judgeAll);
				//反选
				$("#fx").click(function(){
					$("input[name=chk]").each(function(){
						$(this).prop("checked",!$(this).prop("checked"));
					});
					judgeAll();
				});
				
				//新增一行
				$("#addRow").click(function(){
					var newRow = $('<tr>'+
						'<td><input type="checkbox" name="chk" id="" value="3" /></td>'+
						'<td>《Python和我的故事》</td>'+
						'<td>10</td>'+
						'<td>赵老师</td>'+
						'<td>'+					
							'<input type="button" name="" id="" value="修改数量" onclick="updateAmount(this)"/>'+
							'<input type="button" name="" id="" value="删除" onclick="delRow(this)" />'+
						'</td>'+
					'</tr>');
					$("tr:last").after(newRow);
				});
				
				
				//新增多行
				$("#copyRow").click(function(){
					var cloneArr = $("input[name=chk]:checked").parents("tr").clone();
					$("tr:last").after(cloneArr);
				});
				//删除多行
				$("#delRow").click(function(){
					$("input[name=chk]:checked").parents("tr").remove();
				});
			});
			
			//删除一行
			function delRow(obj){
				$(obj).parents("tr").remove();
			}
			
			function judgeAll(){
				var flag = true;
				$("input[name=chk]").each(function(){
					var f = $(this).prop("checked");
					if(!f){
						flag = false;
						return;
					}
				});
				$("#chks").prop("checked",flag);
			}
			
		</script>
	</head>
	<body>
		<h3>jQuery操作表格</h3>
		<hr />
		<input type="button" id="fx" value="反选" />
		<input type="button" id="addRow" value="新增一行" />
		<input type="button" id="delRow" value="删除行"/>
		<input type="button" id="copyRow" value="复制行" />
		<table border="1px" cellpadding="10px" cellspacing="0" id="ta">
			<tr>
				<td width="50px"><input type="checkbox" name="chks" id="chks"  value="1" /></td>
				<td width="200px">书名</td>
				<td width="200px">作者</td>
				<td width="200px">数量</td>
				<td width="200px">操作</td>
			</tr>
			<tr id="">
				<td><input type="checkbox" name="chk" id="" value="2"/></td>
				<td>《Java编程之道》</td>
				<td>wollo</td>
				<td>10</td>
				<td>
					<input type="button" name="aa" id="" value="修改数量" />
					<input type="button" name="" id="" value="删除" />
				</td>
			</tr>			
			<tr>
				<td><input type="checkbox" name="chk" id="" value="3" /></td>
				<td>《Python和我的故事》</td>
				<td>赵老师</td>
				<td>10</td>
				<td>					
					<input type="button" name="" id="" value="修改数量" onclick="updateAmount(this)"/>
					<input type="button" name="" id="" value="删除" onclick="delRow(this)" />
					
				</td>
			</tr>
			
			<tr>
				<td><input type="checkbox" name="chk" id="" value="4" /></td>
				<td>《web开发详解》</td>
				<td>张老师</td>
				<td>30</td>
				<td>
					<input type="button" name="" id="" value="修改数量" />
					<input type="button" name="" id="" value="删除" />
				</td>
			</tr>
			
		</table>
	</body>
</html>
